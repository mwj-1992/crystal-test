function customDiff(t,e){t=angular.copy(t);var n=[],a=[];try{!function(t,e){if(t.constructor==Object||t.constructor!=Number&&t.constructor!=String&&t.constructor!=Date&&t.constructor!=RegExp&&t.constructor!=Function&&t.constructor!=Boolean)for(var r in t){a.push("."+r);try{void 0!=t[r]&&null!=t[r]&&t[r].constructor!=Function&&arguments.callee(t[r],e[r])}catch(t){console.log(t.message)}a.pop()}else if(t.constructor!=Function&&t!=e){if(moment(t).isSame(moment(e),"day"))return;n.push({key:a.join("").slice(1),value:t})}}(t,e)}catch(t){}return n}var isCached=!0,attachments={},noCleaning=!1,scanResult="";lang=/\/en/.test(location.href)?"en":"ar";var app=angular.module("app",["ngSanitize",,"ngCookies","ui.sortable","md.data.table","ngMaterial","ui.router","pascalprecht.translate"]).config(["$httpProvider","$translateProvider","$logProvider",function(t,e,n){var a=function(t,e,n,a,r,i){t.defer();return{request:function(t){return t},requestError:function(t){return t},response:function(t){return-1!=["POST","PUT","DELETE"].indexOf(t.config.method)&&n.get("$mdToast").show(n.get("$mdToast").simple().textContent(t.data.message).position("top")),t},responseError:function(e){return e.status,500==e.status?t.reject("home"):(401==e.status&&n.get("$state").transitionTo("login",{lang:lang},{notify:!1}),503==e.status&&n.get("$state").transitionTo("underConstruction"),e.data&&_.isArray(e.data)&&_.each(e.data,function(t){msg=_.isObject(t.msg)?'<span class="md-highlight">('+n.get("$filter")("translate")(t.param)+")</span>"+t.msg.message:t.msg,n.get("$mdToast").show({hideDelay:10,position:"top right",template:"<md-toast>"+msg+"</md-toast>"})}),e.data&&e.data.message&&n.get("$mdToast").show(n.get("$mdToast").simple().textContent(e.data.message).position("top")),t.reject(e))}}};a.$inject=["$q","$rootScope","$injector","$location","$filter","$cookies"],t.interceptors.push(a),e.useUrlLoader("dist/Translations/"+lang+".min.json"),e.preferredLanguage(lang)}]).config(["$mdDateLocaleProvider",function(t){t.formatDate=function(t){return t?moment(t).format("YYYY-MM-DD, h:mm:ss"):""}}]).config(["$mdThemingProvider",function(t){t.theme("default").accentPalette("orange")}]).run(["$templateCache","$rootScope","mainService","$location","$state",function(t,e,n,a,r){e.$on("$locationChangeStart",function(t,e,n,a){currentLang=_.find(e.split("/"),function(t){return"en"==t})||_.find(e.split("/"),function(t){return"ar"==t}),oldLang=_.find(n.split("/"),function(t){return"en"==t})||_.find(n.split("/"),function(t){return"ar"==t}),currentLang&&oldLang&&currentLang!=oldLang&&location.reload()})}]),test={},origin={};try{angular.module("app").controller("mainCtrl",["$scope","$cookies","$translate","$state","$filter","$http","$location","$rootScope","mainService","$templateCache","$timeout","$mdSidenav","$mdDialog","$stateParams",function(t,e,n,a,r,i,o,c,s,l,u,g,p,f){t.lang=lang,n.use(lang),t.mainService=s,t.$state=a,t.$http=i,t.paginate=function(t){o.search().page=t,s.search(o.search())},t.record={},t.changeLang=function(){"en"==lang?location.href=location.href.replace(/\/en/,"/ar"):location.href=location.href.replace(/\/ar/,"/en"),location.reload()},t.close=function(){p.cancel()},t.delete=function(t){var e=p.confirm().title(r("translate")("del_conf")).textContent(r("translate")("u_will_rm_record")).ok(r("translate")("agree")).cancel(r("translate")("notAgree"));p.show(e).then(function(e){i.delete(s.get().apiUrl+t._id).then(function(e){try{s.get().data.data.splice(s.get().data.data.indexOf(t),1)}catch(t){console.log(t.message)}})},function(){})}}]).controller("listCtrl",["$scope","$http","$mdDialog","mainService","$stateParams","$state",function(t,e,n,a,r,i){t.$state=i,t.action=function(t,e){t._id?a.update(t,e):o(t)};var o=function(r){e.post(a.get().apiUrl,r).then(function(e){t.tmp={},t.formName.$setPristine(),t.formName.$setUntouched(),a.stillOpen||n.hide();try{a.get().data.data.unshift(e.data.data)}catch(t){console.log(t.message)}})};t.openDialog=function(e,a){t.tmp=_.isObject(a)?angular.copy(a):{},t.origin=a,n.show({templateUrl:"templates/dialogs/listDialog.html",parent:angular.element(document.body),clickOutsideToClose:!0,targetEvent:e,autoWrap:!0,scope:t,preserveScope:!0,fullscreen:!0,escapeToClose:!0})}}])}catch(t){console.log(t)}angular.module("app").directive("customPagination",["mainService","$location","$state",function(t,e,n){return{templateUrl:"templates/pagination.html",scope:{total:"@",page:"@?",pages:"@?",limit:"@?"},link:function(t,a,r){t.paginate=function(e){t.$parent.paginate(e),t.page=e},r.page||(t.page=e.search().page||1),r.limit||(t.limit=10),r.pages||(t.pages=Math.ceil(r.total/t.limit)),r.total&&r.total<t.limit&&!n.includes("screensManage")&&a.css("visibility","hidden"),t.changePage=function(n){n?t.$parent.paginate(++e.search().page||1):t.$parent.paginate(--e.search().page),t.page=e.search().page}}}}]).directive("numbersOnly",function(){return{require:"ngModel",resrict:"EA",link:function(t,e,n,a){e.css("font-family","Montserrat"),a.$parsers.push(function(t){try{if(t){var e=t.replace(/[^0-9]/g,"");return e!==t&&(a.$setViewValue(e),a.$render()),e}return""}catch(t){console.log(t.message)}})}}}).directive("arabic",function(){return{require:"ngModel",resrict:"EA",link:function(t,e,n,a){e.css("font-family","Noto Kufi Arabic"),a.$parsers.push(function(t){if(t){var e=t.replace(/[^\u0600-\u06FF $ 0-9 _]/g,"");return e!==t&&(a.$setViewValue(e),a.$render()),e}})}}}).directive("english",function(){return{require:"ngModel",resrict:"EA",link:function(t,e,n,a){a.$parsers.push(function(t){if(t){var e=t.replace(/[^A-Z a-z 0-9 $ _]/g,"");return e!==t&&(a.$setViewValue(e),a.$render()),e}})}}}),angular.module("app").filter("tel",function(){return function(t){if(!t)return"";var e=t.toString().trim().replace(/^\+/,"");if(e.match(/[^0-9]/))return t;var n,a;switch(e.length){case 1:case 2:case 3:n=e;break;default:n=e.slice(0,3),a=e.slice(3)}return a?(a=a.length>3?a.slice(0,4)+"-"+a.slice(4,9):a,("("+n+") "+a).trim()):"("+n}}).filter("range",function(){return function(t,e,n){e=Math.ceil(e);for(var a=0;a<e;a++)t.push(a);return n&&t.reverse(),t}}).filter("htmlToPlaintext",function(){return function(t){return t?String(t).replace(/<[^>]+>/gm,""):""}}).filter("split",function(){return function(t,e,n){return t.split(e)[n]}}).filter("stringToDate",["$filter",function(t){return function(t,e){return e=e||"YYYY-MM-DD, h:mm:ss",t?moment(t).format(e)||"--":"--"}}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("login",{url:"/:lang/login",params:{lang:lang},views:{login:{template:"<login-directive></login-directive>",controller:function(){}}},resolve:{data:["authService","$location",function(t,e){t.isLoggedIn()}]}}).state("item",{url:"/:lang/item",params:{lang:lang},templateUrl:"templates/lists/list.html",resolve:{data:["$http","mainService","$stateParams","$q","$location",function(t,e,n,a,r){return e.get().apiUrl="item/",t.get("item/",{params:r.search()}).then(t=>e.get().data=t.data)}]}})}]);try{angular.module("app").service("mainService",["$http","$mdDialog","$location",function(t,e,n){var a={},r={};return a.queryParams=n.search(),a.set=function(t){r=t},a.get=function(){return r},a.search=function(e){e&&(tmp1=angular.copy(e),t.get(r.apiUrl,{params:tmp1}).then(function(t){a.queryParams=n.search(),n.search(tmp1),r.data=t.data}))},a.update=function(n,a){var i=customDiff(n,a),o=-1;_.isArray(i)&&_.size(i)&&t.put(r.apiUrl+a._id,{params:i}).then(function(t){try{o=r.data.data.findIndex(function(t){return t._id==n._id})}catch(t){console.log(t.message)}-1!=o&&(r.data.data[o]=n),e.cancel()},function(t){return!1})},a}])}catch(t){alert(t)}